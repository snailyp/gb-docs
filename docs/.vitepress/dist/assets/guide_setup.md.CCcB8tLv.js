import{_ as e,c as a,o as s,ae as i}from"./chunks/framework.Dh1jimFm.js";const l="/assets/image.BDNwVK88.png",n="/assets/image-1.CJPsBMNU.png",d="/assets/image-2.Cz6jsp7A.png",o="/assets/image-3.BaArgCjQ.png",r="/assets/image-4.Ba1qiILV.png",g="/assets/image-5.D17yTlKt.png",c="/assets/image-6.B7AsX37G.png",p="/assets/image-7.eZmgSlAP.png",h="/assets/image-8.D2qYPnWh.png",m="/assets/image-9.DRR9QDWh.png",_="/assets/image-10.nQtGO-vp.png",u="/assets/image-11.CL2ygNzk.png",x="/assets/image-12.DNE87Gmu.png",f="/assets/image-13.CUZBqds5.png",y="/assets/image-14.BrZkYKo1.png",k="/assets/image-15.B8-3RbAw.png",L=JSON.parse('{"title":"HuggingFace部署数据库版本 🚀","description":"","frontmatter":{},"headers":[],"relativePath":"guide/setup.md","filePath":"guide/setup.md"}'),b={name:"guide/setup.md"};function q(F,t,S,E,P,B){return s(),a("div",null,t[0]||(t[0]=[i('<h1 id="huggingface部署数据库版本-🚀" tabindex="-1">HuggingFace部署数据库版本 🚀 <a class="header-anchor" href="#huggingface部署数据库版本-🚀" aria-label="Permalink to &quot;HuggingFace部署数据库版本 🚀&quot;">​</a></h1><h2 id="一、准备工作-准备好了吗-清单在这里-📋" tabindex="-1">一、准备工作 准备好了吗？清单在这里！📋 <a class="header-anchor" href="#一、准备工作-准备好了吗-清单在这里-📋" aria-label="Permalink to &quot;一、准备工作 准备好了吗？清单在这里！📋&quot;">​</a></h2><ul><li>mysql数据库服务</li><li>huggingface账号</li><li>gemini_api_key</li></ul><h2 id="二、创建mysql数据库-💾" tabindex="-1">二、创建MySQL数据库 💾 <a class="header-anchor" href="#二、创建mysql数据库-💾" aria-label="Permalink to &quot;二、创建MySQL数据库 💾&quot;">​</a></h2><h3 id="_1-注册-aiven-账号-📝" tabindex="-1">1. 注册 <a href="https://console.aiven.io/" target="_blank" rel="noreferrer">aiven</a> 账号 📝 <a class="header-anchor" href="#_1-注册-aiven-账号-📝" aria-label="Permalink to &quot;1. 注册 [aiven](https://console.aiven.io/) 账号 📝&quot;">​</a></h3><h3 id="_2-登录并选择个人计划-地区选择美国-与-hugging-face-ip-保持一致-🇺🇸" tabindex="-1">2. 登录并选择个人计划，地区选择美国（与 Hugging Face IP 保持一致）🇺🇸 <a class="header-anchor" href="#_2-登录并选择个人计划-地区选择美国-与-hugging-face-ip-保持一致-🇺🇸" aria-label="Permalink to &quot;2. 登录并选择个人计划，地区选择美国（与 Hugging Face IP 保持一致）🇺🇸&quot;">​</a></h3><p><img src="'+l+'" alt="alt text"></p><p><img src="'+n+'" alt="alt text"></p><h3 id="_3-创建-mysql-服务-选择免费计划-🆓" tabindex="-1">3. 创建 MySQL 服务，选择免费计划 🆓 <a class="header-anchor" href="#_3-创建-mysql-服务-选择免费计划-🆓" aria-label="Permalink to &quot;3. 创建 MySQL 服务，选择免费计划 🆓&quot;">​</a></h3><p><img src="'+d+'" alt="alt text"></p><p><img src="'+o+'" alt="alt text"></p><h3 id="_4-记录下数据库配置信息-后续部署服务时需要用到-这些信息对应-gemini-balance-服务配置中的以下项-见图示-👇" tabindex="-1">4. 记录下数据库配置信息（后续部署服务时需要用到），这些信息对应 Gemini Balance 服务配置中的以下项（见图示）👇 <a class="header-anchor" href="#_4-记录下数据库配置信息-后续部署服务时需要用到-这些信息对应-gemini-balance-服务配置中的以下项-见图示-👇" aria-label="Permalink to &quot;4. 记录下数据库配置信息（后续部署服务时需要用到），这些信息对应 Gemini Balance 服务配置中的以下项（见图示）👇&quot;">​</a></h3><p><img src="'+r+'" alt="alt text"></p><h2 id="三、hugging-face-部署服务-☁️" tabindex="-1">三、Hugging Face 部署服务 ☁️ <a class="header-anchor" href="#三、hugging-face-部署服务-☁️" aria-label="Permalink to &quot;三、Hugging Face 部署服务 ☁️&quot;">​</a></h2><h3 id="_1-注册或登录-hugging-face-账号-🔑" tabindex="-1">1. 注册或登录 Hugging Face 账号 🔑 <a class="header-anchor" href="#_1-注册或登录-hugging-face-账号-🔑" aria-label="Permalink to &quot;1. 注册或登录 Hugging Face 账号 🔑&quot;">​</a></h3><h3 id="_2-创建-space-空间名可以随意填写-尽量独一无二-选择-docker-环境。🐳" tabindex="-1">2. 创建 Space，空间名可以随意填写（尽量独一无二），选择 Docker 环境。🐳 <a class="header-anchor" href="#_2-创建-space-空间名可以随意填写-尽量独一无二-选择-docker-环境。🐳" aria-label="Permalink to &quot;2. 创建 Space，空间名可以随意填写（尽量独一无二），选择 Docker 环境。🐳&quot;">​</a></h3><p><img src="'+g+'" alt="alt text"></p><p><img src="'+c+'" alt="alt text"></p><p><img src="'+p+'" alt="alt text"></p><h3 id="_3-选择-files-选项卡-创建一个名为-dockerfile-的文件。📄" tabindex="-1">3. 选择 Files 选项卡，创建一个名为 <code>Dockerfile</code> 的文件。📄 <a class="header-anchor" href="#_3-选择-files-选项卡-创建一个名为-dockerfile-的文件。📄" aria-label="Permalink to &quot;3. 选择 Files 选项卡，创建一个名为 `Dockerfile` 的文件。📄&quot;">​</a></h3><p><img src="'+h+`" alt="alt text"></p><p>填入下面内容，点击页面最下方的<code>commit new file to main</code>按钮</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ghcr.io/snailyp/gemini-balance:latest</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EXPOSE</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7860</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uvicorn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app.main:app&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;--host&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;0.0.0.0&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;--port&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;7860&quot;]</span></span></code></pre></div><p><img src="`+m+'" alt="alt text"></p><h3 id="_4-添加必要的环境变量-📝" tabindex="-1">4. 添加必要的环境变量 📝 <a class="header-anchor" href="#_4-添加必要的环境变量-📝" aria-label="Permalink to &quot;4. 添加必要的环境变量 📝&quot;">​</a></h3><p>选择settings，往下拉到Variables and secrets，new variavble新建公开变量，new secret新建私密变量（比如gemini密钥）</p><p><img src="'+_+'" alt="alt text"></p><p>这些变量是必填的，正确填完之后，服务就会正常运行了 按顺序一个一个添加环境变量，先API 相关配置，再时区配置，最后数据库配置</p><table tabindex="0"><thead><tr><th style="text-align:left;">配置项</th><th style="text-align:left;">说明</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>API 相关配置</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>API_KEYS</code></td><td style="text-align:left;">必填，Gemini API 密钥列表可以配置一个值，批量设置可以在web端进行（比较方便），用于负载均衡</td><td style="text-align:left;"><code>[&quot;gemini_key&quot;]</code></td></tr><tr><td style="text-align:left;"><code>ALLOWED_TOKENS</code></td><td style="text-align:left;">必填，允许访问的 Token 列表，该值为自定义值，可用于api调用，分享给朋友使用</td><td style="text-align:left;"><code>[&quot;allowed_key1&quot;]</code></td></tr><tr><td style="text-align:left;"><code>AUTH_TOKEN</code></td><td style="text-align:left;">可选，超级管理员token，具有所有权限也可以用于api调用，不填默认使用 ALLOWED_TOKENS 的第一个，web端登录需要用这个值</td><td style="text-align:left;"><code>sk-123456</code></td></tr><tr><td style="text-align:left;"><strong>时区配置</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>TZ</code></td><td style="text-align:left;">时区设置，建议值 <code>Asia/Shanghai</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><strong>数据库配置</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>MYSQL_HOST</code></td><td style="text-align:left;">必填，MySQL 数据库主机地址</td><td style="text-align:left;"><code>mysql-xxxxxxxx.h.aivencloud.com</code></td></tr><tr><td style="text-align:left;"><code>MYSQL_PORT</code></td><td style="text-align:left;">必填，MySQL 数据库端口</td><td style="text-align:left;"><code>100000</code></td></tr><tr><td style="text-align:left;"><code>MYSQL_USER</code></td><td style="text-align:left;">必填，MySQL 数据库用户名</td><td style="text-align:left;"><code>adafd</code></td></tr><tr><td style="text-align:left;"><code>MYSQL_PASSWORD</code></td><td style="text-align:left;">必填，MySQL 数据库密码</td><td style="text-align:left;"><code>123456</code></td></tr><tr><td style="text-align:left;"><code>MYSQL_DATABASE</code></td><td style="text-align:left;">必填，MySQL 数据库名称</td><td style="text-align:left;"><code>defaultdb</code></td></tr></tbody></table><p><img src="'+u+'" alt="alt text"></p><p><img src="'+x+'" alt="alt text"></p><h2 id="四、访问-web-端-🌐" tabindex="-1">四、访问 Web 端 🌐 <a class="header-anchor" href="#四、访问-web-端-🌐" aria-label="Permalink to &quot;四、访问 Web 端 🌐&quot;">​</a></h2><p>按照下面的步骤复制出请求 URL（这将是您在各种客户端中填写的 <code>base_url</code>），然后在浏览器（推荐使用 Chrome 浏览器）中打开该 URL。输入您配置的 <code>AUTH_TOKEN</code> 值，即可进入管理后台。💻 <img src="'+f+'" alt="alt text"></p><p><img src="'+y+'" alt="alt text"></p><p>在这里，您可以方便地批量添加密钥，支持任意格式（系统会基于正则表达式进行匹配并自动去重）。最后，请务必点击页面下方的“保存”按钮，您的配置才会生效。💾 <img src="'+k+'" alt="alt text"></p>',35)]))}const A=e(b,[["render",q]]);export{L as __pageData,A as default};
